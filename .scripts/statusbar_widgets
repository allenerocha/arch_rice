get_btry() {
	bat_status=$(upower -i $(upower -e | grep BAT) | awk '{if($1=="state:") print $2}')

	if [ $bat_status == 'charging' ]
	then
		# thunderbolt
		printf 'âš¡'
	else
		# battery
		printf 'ğŸ”‹'
	fi
	upower -i $(upower -e | grep BAT) | awk '{ if($1=="percentage:") print $2 }'
}

get_cpu_tmp() {
	total=0
	count=0
	for i in $( sensors | awk '{ if($1=="Core") print $3 }' | sed 's/+//g' | sed 's/Â°C//g')
	do
		total=$(echo $total+$i | bc)
		((count++))
	done

	avg_tmp=$(echo "$total / $count" | bc)
	printf "ğŸŒ¡ï¸ $avg_tmpÂ°C\n"

	sensors | awk '{ if($1=="Core") print $1,"",$2,"-",$3 }' | sed 's/+//g'
}

get_gpu_tmp() {
	gpu_tmp=$(nvidia-smi --query-gpu=temperature.gpu --format=csv,noheader)
	printf "ğŸŒ¡ï¸ $gpu_tmpÂ°C\n"
}

get_mem() {
	echo -e 'ğŸ§ '
	free -h | awk '{ if($1=="Mem:") print $3,"/",$2 }' | sed 's/Gi/G/g'
}

get_stg() {
	echo -e 'ğŸ’¾'
	df -h --total | sed 's/\/dev\///g' | sed '/\/boot/d' | grep -E -e 'sd[a-z]|nvme0n[0-9]|mmcblk[0-9]' | awk '{ print $1,"  ",$3,"/",$2 }'
}

get_dte_and_tme() {
	printf 'ğŸ“…  '
	date +'%d %b %y   %k:%M'
}

while [ true ]
do
	get_btry
	get_cpu_tmp
	get_gpu_tmp
	get_mem
	get_stg
	get_dte_and_tme
	sleep 1
	clear
done
